<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <link rel="shortcut icon" type="image/png" href="images/firestorm_logo.png"/>
    <meta name="theme-color" content="#0277bd"/>
    <title>Firestorm - RayLabz</title>

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>

<nav>
    <div class="nav-wrapper orange darken-4"></div>
</nav>

<main>

    <div class="section no-pad-bot" id="index-banner">
        <div class="container">
            <br>
            <h1 class="header center orange-text text-darken-4">Firestorm</h1>
            <br>
            <div class="row center">
                <img class="responsive-img" src="images/firestorm_logo.png" width="200"/>
            </div>
            <div class="row center">
                <h4 class="header col s12 light">An object-oriented data access API for Google's Firestore.</h4>
            </div>

            <div class="row center">
            <p class="justify col s12 m6 offset-m3">
                Firestorm is an object-oriented data access API for Google's Firestore. It enables developers to
                rapidly develop applications that utilize Firestore's capabilities by interacting with it in an
                object-oriented way. Firestorm uses standardized functions and complements the full flexibility of Google's Firestore
                API. It organizes classes as Firestore collections and objects of these classes as documents in these collections.
            </p>
            </div>

            <hr/>

            <h3>Contents</h3>

            <ul class="browser-default">
                <li><a href="#downloadAndImport">Download and import</a>
                <li><a href="#guide">Guide</a>
                    <ul class="browser-default">
                        <li><a href="#initialization">Initialization</a>
                        <li><a href="#customClasses">Custom classes</a></li>
                        <li><a href="#basicOperations">Basic operations</a>
                            <ul class="browser-default">
                                <li><a href="#create">Create</a></li>
                                <li><a href="#update">Update</a></li>
                                <li><a href="#list">List</a></li>
                                <li><a href="#listAll">List all</a></li>
                                <li><a href="#delete">Delete</a></li>
                                <li><a href="#documentReference">Obtaining document references</a></li>
                                <li><a href="#collectionReference">Obtaining collection references</a></li>
                            </ul>
                        </li>
                        <li><a href="#realTimeUpdates">Real-time updates</a>
                            <ul class="browser-default">
                                <li><a href="#attachListener">Attaching listeners</a></li>
                                <li><a href="#detachListener">Detaching listeners</a></li>
                            </ul>
                        </li>
                        <li><a href="#transactions">Transactions</a></li>
                        <li><a href="#batches">Batch writes</a></li>
                        <li><a href="#pagination">Pagination</a></li>
                    </ul>
                </li>
                <li><a href="#documentation">Documentation</a></li>
                <li><a href="#sourceCode">Source code</a></li>
                <li><a href="#usage">License</a></li>
                <li><a href="#bugreport">Bug reporting</a></li>
            </ul>

            <h3 id="downloadAndImport">Download and import</h3>

            <p>You can easily import Firestorm in your project using Maven or Gradle:</p>

            <p><b><u>Maven:</u></b></p>

            <pre class="prettyprint">
                TODO
            </pre>

            <p><b><u>Gradle:</u></b></p>

            <pre class="prettyprint">implementation 'com.raylabz:firestorm:1.0.0'</pre>

            <p>
                Alternatively, you can download Firestorm as a .jar library:
            </p>

            <a class="btn orange darken-4" href="#">Download
                .jar</a>


            <h3 id="guide">Guide</h3>

            <h4 id="initialization">Initialization</h4>

            <p>To use Firestorm, set up and initialize the Firebase Admin SDK as described <a href="https://firebase.google.com/docs/admin/setup">here</a>.</p>

            <p>You can initialize Firestorm by calling <span class="code">Firestorm.init()</span> after initializing your FirebaseApp.
                You do not need to initialize a Firestore object as this is automatically done by this method.</p>

            <pre class="prettyprint java">
//Initialize Firebase (using a Service Account configuration file):
try {
    FileInputStream serviceAccount = new FileInputStream("path/to/serviceAccountKey.json");
    FirebaseOptions options = new FirebaseOptions.Builder()
            .setCredentials(GoogleCredentials.fromStream(serviceAccount))
            .setDatabaseUrl("https://&lt;YOUR_PROJECT_ID&gt;.firebaseio.com/")
            .build();
    FirebaseApp.initializeApp(options);
} catch (IOException e) {
    e.printStackTrace();
}

//Initialize Firestorm:
<mark>Firestorm.init();</mark></pre>

            <h5 id="initializationOnTheGCP">Initialization on the GCP</h5>

            <p class="justify">Alternatively, if your app is hosted on a Google Cloud Platform server (e.g. App Engine or Compute Engine),
                you can initialize Firebase using the default service account:</p>

            <pre class="prettyprint java">
//Initialize Firebase (using application default credentials):
try {
    FirebaseOptions options = new FirebaseOptions.Builder()
            .setCredentials(GoogleCredentials.getApplicationDefault())
            .setDatabaseUrl("https://&lt;YOUR_PROJECT_ID&gt;.firebaseio.com/")
            .build();
    FirebaseApp.initializeApp(options);
} catch (IOException e) {
    e.printStackTrace();
}

//Initialize Firestorm:
Firestorm.init();</pre>

            <h4 id="customClasses">Custom classes</h4>

            <p class="justify">
                Firestorm allows you to create your own custom classes, which it then can interact with in Firestore.
                Your objects must:
            </p>

            <ul class="browser-default">
                <li>Extend the default Firestorm object, called <span class="code">FirestormObject</span></li>
                <li>Have a public empty constructor.</li>
            </ul>

            <p>The following code shows an example on how to create a Firestorm-managed object:</p>

            <pre class="prettyprint java">
public class Person <mark>extends FirestormObject</mark> {

    private String firstName;
    private String lastName;
    private int age;

    public Person(String firstName, String lastName, int age) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.age = age;
    }

    <mark>public Person() { }</mark>

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

}</pre>

            <h5>Excluding attributes</h5>

            <p>You can exclude certain class attributes from being stored in the Firestore by labelling their <u>getter functions</u>
            with the <span class="code red-text text-darken-3">@Exclude</span> annotation:</p>

            <pre class="prettyprint java">
public class Person extends FirestormObject {

    private String firstName;
    private String lastName;
    private int age;
    <mark>private String excludedField;</mark>

    public Person(String firstName, String lastName, int age, String excludedField) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.age = age;
        this.excludedField = excludedField;
    }

    public Person() { }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    <mark>@Exclude</mark>
    public String getExcludedField() {
        return excludedField;
    }

    public void setExcludedField(String excludedField) {
        this.excludedField = excludedField;
    }

}</pre>

            <hr/>

            <h4 id="basicOperations">Basic operations</h4>

            <h5 id="create">Create</h5>

            <p>
                You can create objects in Firestore by using <span class="code">Firestorm.create()</span> and providing an instance of
            your custom class:
            </p>

            <pre class="prettyprint java">
Firestorm.create(person);</pre>

            <p>Creating an object will set its <span class="code">id</span> attribute which is null by default. You can
            retrieve this attribute and save it for reference if needed:</p>

            <pre class="prettyprint java">
String personID = person.getId();</pre>

            <h5 id="update">Update</h5>

            <p>
                You can update objects by using <span class="code">Firestore.update()</span> and providing your object:
            </p>

            <pre class="prettyprint java">
Firestorm.update(person);</pre>

            <div class="info-panel light-blue lighten-2 white-text">Only changed attributes will be updated on Firestore.</div>

            <h5 id="list">List</h5>

            <p>
                Firestorm supports fetching objects of a given type using the <span class="code">Firestorm.list()</span> method
                for up to a certain number of objects. <u>The <span class="code">list()</span> method is meant for use with
                classes/types that do not have many objects and which do not normally grow a lot</u>.
                You can list objects of a type by providing the class and maximum number of objects to retrieve as parameters:
            </p>

            <pre class="prettyprint java">
Firestorm.list(Person.class, 100);</pre>

            <p>The above code will retrieve at maximum 100 objects of type Person.</p>

            <div class="info-panel light-blue lighten-2 white-text">Google will charge your Firestore instance by the amount of reads and writes
            occurring on your database. This is why the <span class="code">list()</span> method forces you to limit the amount
            of objects retrieved.</div>

            <h5 id="listAll">List all</h5>

            <p>
                If you still need to fetch all objects of a given type, you can use the <span class="code">Firestorm.listAll()</span>
                method, which allows you to do that without any limitations:
            </p>

            <pre class="prettyprint java">
Firestorm.listAll(Person.class);</pre>

            <div class="info-panel light-blue lighten-2 white-text">Google will charge your project $0.30-$0.60 per million reads depending on location.
            <a class="yellow-text" href="https://firebase.google.com/docs/firestore/pricing">Click here</a> to find out more about Firebase pricing.</div>

            <h5 id="delete">Delete</h5>

            <p>
                You can delete an object by using the <span class="code">Firestorm.delete()</span> method. Deleting an object
                removes its <span class="code">id</span> attribute and sets it back to null.
            </p>

            <pre class="prettyprint java">
Firestorm.delete(person);</pre>

            <h5 id="documentReference">Obtaining document references</h5>

            <p>
                You can obtain a reference to an object's Firestore document by using <span class="code">Firestorm.getObjectReference()</span>.
                This returns a DocumentReference which can be used with the regular Firestore API.
            </p>

            <pre class="prettyprint java">
DocumentReference objectReference = person.getObjectReference();</pre>

            <p>
                Alternatively, you can provide an object type and a document ID:
            </p>

            <pre class="prettyprint java">
DocumentReference objectReference = Firestorm.getObjectReference(Person.class, documentID);</pre>

            <h5 id="collectionReference">Obtaining collection references</h5>

            <p>
                You can also obtain a reference a type's collection in Firestore by using <span class="code">Firestorm.getCollectionReference()</span>.
                This returns a CollectionReference which can be used with the regular Firestore API.
            </p>

            <pre class="prettyprint java">
CollectionReference collectionReference = Firestorm.getCollectionReference(Person.class);</pre>

            <hr/>

            <h4 id="realTimeUpdates">Real-time updates</h4>

            <h6 id="attachListener">Attaching listeners</h6>

            <p>Firestorm allows you to use Firestore's real-time update features by attaching listeners to objects using the
            <span class="code">attachListener()</span> method and then implementing a <span class="code">FirestormEventListener</span>.</p>

            <pre class="prettyprint java">
person.attachListener(new FirestormEventListener&lt;Person&gt;(Person.class) {
    @Override
    public void onSuccess(Person object) {
        System.out.println("Object updated!");
    }

    @Override
    public void onFailure(String failureMessage) {
        System.out.println("Failed to update object: " + failureMessage);
    }
});</pre>

            <p>Alternatively, you can attach a listener to a Firestore document by specifying its type and document ID:</p>

            <pre class="prettyprint java">
Firestorm.attachListener(Person.class, documentID, new FirestormEventListener&lt;Person&gt;(Person.class) {
    @Override
    public void onSuccess(Person object) {
        System.out.println("Object updated!");
    }

    @Override
    public void onFailure(String failureMessage) {
        System.out.println("Failed to update object: " + failureMessage);
    }
});</pre>

            <p>You can save the listener in a variable for future reference:</p>

            <pre class="prettyprint java">
<mark>final ListenerRegistration listenerRegistration</mark> = Firestorm.attachListener(Person.class, documentID, new FirestormEventListener&lt;Person&gt;(Person.class) {
    @Override
    public void onSuccess(Person object) {
        System.out.println("Object updated!");
    }

    @Override
    public void onFailure(String failureMessage) {
        System.out.println("Failed to update object: " + failureMessage);
    }
});</pre>

            <div class="info-panel light-blue lighten-2 white-text">Attaching a listener to an object automatically saves it in the object's <span class="code">listeners</span> list
                for future reference so you do not need to do that manually.
                You can obtain the list of listeners for each object by using the method <span class="code">getListeners()</span> on an object.</div>

            <h6 id="detachListener">Detaching listeners</h6>

            <p>You can detach a listener from an object by passing a saved <span class="code">ListenerRegistration</span> instance to
            the <span class="code">detachListener()</span> method:</p>

            <pre class="prettyprint java">
person.detachListener(listenerRegistration);</pre>

            <p>You can also detach all listeners from an object by using <span class="code">detachAllListeners()</span>:</p>

            <pre class="prettyprint java">
person.detachAllListeners();</pre>

            <p>To detach a listener that was assigned a Firestore document, you can use:</p>

            <pre class="prettyprint java">
Firestorm.detachListener(listenerRegistration);</pre>

            <hr/>

            <h4 id="transactions">Transactions</h4>

            <!--TODO-->

            <hr/>

            <h4 id="batches">Batch writes</h4>

            <!--TODO-->

            <hr/>

            <h4 id="pagination">Pagination</h4>

            <!--TODO-->

            <hr/>

            <!--------------------------------------------------------------------------------------------------------->

            <h3 id="documentation">Documentation</h3>

            <p>Visit the <a href="javadoc">documentation.</a></p>

            <hr/>

            <h3 id="usage">License</h3>

            <p>
                Firestorm is released under the <a href="https://github.com/RayLabz/JSec/blob/master/LICENSE">Apache 2.0
                license</a>.
            </p>

            <hr/>

            <h3 id="source">Source code</h3>

            <p>
                You can find the source code at the project's repository <a
                    href="https://github.com/RayLabz/Firestorm/">here</a>.
            </p>

            <hr/>

            <h3 id="bugreport">Bug reporting</h3>

            <p>Please report bugs <a href="mailto:RayLabzg@gmail.com?subject=Firestorm">here</a>.</p>

            <br/><br/>
        </div>
    </div>

</main>

<footer class="page-footer orange darken-4">
    <div class="container">
        <div class="center light">Made by <a class="white-text" href="http://www.RayLabz.com">RayLabz</a></div>
        <br/>
    </div>
</footer>


<!--  Scripts-->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="js/materialize.js"></script>
<script src="js/init.js"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

</body>
</html>
